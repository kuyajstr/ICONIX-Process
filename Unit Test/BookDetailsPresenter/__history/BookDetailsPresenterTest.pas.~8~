unit BookDetailsPresenterTest;

interface

uses
  DUnitX.TestFramework,
  PresenterIntf,
  ViewIntf,
  BookDetailsRestService,
  ViewFactory,
  BookDetailsPresenter;

type
  [TestFixture]
  TBookDetailsPresenterTest = class
  private
    FView: IBookDetailsView;
    FRestService: IBookDetailsRestService;
    FViewFactory: IViewFactory;
  public
    [Setup]
    procedure Setup;
    [TearDown]
    procedure TearDown;

    [Test]
    procedure IsUserAuthorized_UserIsLoggedIn;
  end;

implementation

uses
  BookDetailsServiceStub,
  ViewFactoryStub,
  Book;

{ TBookDetailsPresenterTest }

procedure TBookDetailsPresenterTest.IsUserAuthorized_UserIsLoggedIn;
begin
  //Arrange
  var Book := TBook.Create('Book A', 'Synopsis A', 1);
  var BookDetailsPresenter := TBookDetailsPresenter.Create(FView, Book, FRestService, FViewFactory);

  //Act
  var IsAuthorized := BookDetailsPresenter.IsUserAuthorized;

  //Assert
end;

procedure TBookDetailsPresenterTest.Setup;
begin
  FViewFactory := TViewFactoryStub.Create(True);
  FView := FViewFactory.CreateBookDetailView(nil);
end;

procedure TBookDetailsPresenterTest.TearDown;
begin

end;

initialization
  TDUnitX.RegisterTestFixture(TBookDetailsPresenterTest);

end.
